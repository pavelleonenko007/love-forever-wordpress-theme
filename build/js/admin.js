(()=>{"use strict";const t=()=>{!function(t){function e(e,n){return n.children().each((function(){t(this).width(t(this).width())})),n}t(document).ready((function(){document.head.insertAdjacentHTML("beforeend","<style>\n          .ui-state-highlight {background-color: pink !important;} \n        </style>");const n=t(".wp-list-table").find("tbody"),o=new URLSearchParams(window.location.search).get("post_type")||"post",a={dress:"update_dress_order",promo_blocks:"update_promo_order",story:"update_story_order"};if(!a[o])return;const r=parseInt(t(`#edit_${o}_per_page`).val())||10;n.sortable({placeholder:"ui-state-highlight",classes:{"ui-sortable":"sortable","ui-sortable-handle":"sortable__handle","ui-sortable-helper":"sortable__helper"},handle:".column-menu_order",axis:"y",items:"> tr",helper:e,update:function(e,s){const i=[];n.find("tr").each((function(){i.push(t(this).attr("id").replace("post-",""))}));const c=parseInt(new URLSearchParams(window.location.search).get("paged"))||1,l=a[o],d=new URLSearchParams(window.location.search),u={action:l,order:i,page:c,posts_per_page:r,nonce:LOVE_FOREVER_ADMIN.NONCE};for(const[t,e]of d.entries())t in u||(u[t]=e);t.ajax({url:LOVE_FOREVER_ADMIN.AJAX_URL,type:"POST",data:u,success:function(e){if(!e.success)return console.error(e.data.debug),void alert(e.data.message);!function(e){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n];t(`#post-${o} .column-menu_order`).text(n)}}(e.data.result)},error:function(){alert("Произошла ошибка при обновлении порядка."),window.location.reload()}})},start:function(e,n){const o=t(n.item),a=t(n.placeholder).find("td");a.each(((t,e)=>{t>0&&e.remove()})),a.attr("colspan",o.find("th:not(.hidden),td:not(.hidden)").length)},stop:function(t,e){n.css("width","")}}),n.disableSelection()}))}(jQuery)};jQuery(document).ready((function(e){t(),function(t){const e=t("#regularPriceField input"),n=t("#salePercentField input"),o=t("#priceWithDiscountField input");n.on("input",(t=>{const a=e.val()?parseInt(e.val()):0,r=n.val()?parseInt(n.val()):0;r>99&&n.val(99),r<0&&n.val(0);const s=a-a*r/100;o.val(Math.ceil(s))})),o.on("input",(t=>{let a=e.val()?parseInt(e.val()):0,r=o.val()?parseInt(o.val()):0;r>a&&(r=a-1),r<0&&(r=1);const s=a>0&&r>0?Math.round((a-r)/a*100):0;console.log({discountPercent:s}),n.val(s)}))}(jQuery)}))})();