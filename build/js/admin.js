(()=>{"use strict";const t=()=>{!function(t){function e(e,n){return n.children().each((function(){t(this).width(t(this).width())})),n}t(document).ready((function(){document.head.insertAdjacentHTML("beforeend","<style>\n          .ui-state-highlight {background-color: pink !important;} \n        </style>");const n=t(".wp-list-table").find("tbody"),a=parseInt(t("#edit_dress_per_page").val())||10;n.sortable({placeholder:"ui-state-highlight",classes:{"ui-sortable":"sortable","ui-sortable-handle":"sortable__handle","ui-sortable-helper":"sortable__helper"},handle:".column-menu_order",axis:"y",items:"> tr",helper:e,update:function(e,o){const r=[];n.find("tr").each((function(){r.push(t(this).attr("id").replace("post-",""))}));const s=parseInt(new URLSearchParams(window.location.search).get("paged"))||1,i=new URLSearchParams(window.location.search).get("dress_category");t.ajax({url:LOVE_FOREVER_ADMIN.AJAX_URL,type:"POST",data:{action:"update_dress_order",order:r,page:s,posts_per_page:a,dress_category:i,nonce:LOVE_FOREVER_ADMIN.NONCE},success:function(e){if(!e.success)return console.error(e.data.debug),void alert(e.data.message);!function(e){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const a=e[n];t(`#post-${a} .column-menu_order`).text(n)}}(e.data.result)},error:function(){alert("Произошла ошибка при обновлении порядка."),window.location.reload()}})},start:function(e,n){const a=t(n.item);t(n.placeholder).find("td").attr("colspan",a.find("th:not(.hidden),td:not(.hidden)").length)},stop:function(t,e){n.css("width","")}}),n.disableSelection()}))}(jQuery)};jQuery(document).ready((function(e){t(),function(t){const e=t("#regularPriceField input"),n=t("#salePercentField input"),a=t("#priceWithDiscountField input");n.on("input",(t=>{const o=e.val()?parseInt(e.val()):0,r=n.val()?parseInt(n.val()):0;r>99&&n.val(99),r<0&&n.val(0);const s=o-o*r/100;a.val(Math.ceil(s))})),a.on("input",(t=>{let o=e.val()?parseInt(e.val()):0,r=a.val()?parseInt(a.val()):0;r>o&&(r=o-1),r<0&&(r=1);const s=o>0&&r>0?Math.round((o-r)/o*100):0;console.log({discountPercent:s}),n.val(s)}))}(jQuery)}))})();