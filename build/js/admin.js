(()=>{"use strict";const e=()=>{!function(e){function t(t,n){return n.children().each((function(){e(this).width(e(this).width())})),n}e(document).ready((function(){document.head.insertAdjacentHTML("beforeend","<style>\n          .ui-state-highlight {background-color: pink !important;} \n        </style>");const n=e(".wp-list-table").find("tbody"),o=parseInt(e("#edit_dress_per_page").val())||10;n.sortable({placeholder:"ui-state-highlight",classes:{"ui-sortable":"sortable","ui-sortable-handle":"sortable__handle","ui-sortable-helper":"sortable__helper"},handle:".column-menu_order",axis:"y",items:"> tr",helper:t,update:function(t,a){const r=[];n.find("tr").each((function(){r.push(e(this).attr("id").replace("post-",""))}));const s=parseInt(new URLSearchParams(window.location.search).get("paged"))||1,i=new URLSearchParams(window.location.search).get("dress_category");let c;c="promo_blocks"===(new URLSearchParams(window.location.search).get("post_type")||"post")?"update_promo_order":"update_dress_order",e.ajax({url:LOVE_FOREVER_ADMIN.AJAX_URL,type:"POST",data:{action:c,order:r,page:s,posts_per_page:o,dress_category:i,nonce:LOVE_FOREVER_ADMIN.NONCE},success:function(t){if(!t.success)return console.error(t.data.debug),void alert(t.data.message);!function(t){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];e(`#post-${o} .column-menu_order`).text(n)}}(t.data.result)},error:function(){alert("Произошла ошибка при обновлении порядка."),window.location.reload()}})},start:function(t,n){const o=e(n.item);e(n.placeholder).find("td").attr("colspan",o.find("th:not(.hidden),td:not(.hidden)").length)},stop:function(e,t){n.css("width","")}}),n.disableSelection()}))}(jQuery)};jQuery(document).ready((function(t){e(),function(e){const t=e("#regularPriceField input"),n=e("#salePercentField input"),o=e("#priceWithDiscountField input");n.on("input",(e=>{const a=t.val()?parseInt(t.val()):0,r=n.val()?parseInt(n.val()):0;r>99&&n.val(99),r<0&&n.val(0);const s=a-a*r/100;o.val(Math.ceil(s))})),o.on("input",(e=>{let a=t.val()?parseInt(t.val()):0,r=o.val()?parseInt(o.val()):0;r>a&&(r=a-1),r<0&&(r=1);const s=a>0&&r>0?Math.round((a-r)/a*100):0;console.log({discountPercent:s}),n.val(s)}))}(jQuery)}))})();